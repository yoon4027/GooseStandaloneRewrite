{"version":3,"sources":["../../src/patches/gooseupdate-runtime.ts"],"sourcesContent":["import { Patch } from \"#lib/structures\";\nimport { replaceInFile } from \"#lib/util\";\nimport { join } from \"path\";\n\nexport class UserPatch extends Patch {\n  public override async run({ asarExtractPath }: Patch.Args) {\n    await replaceInFile({\n      filePath: join(asarExtractPath, \"app_bootstrap\", \"Constants.js\"),\n      toReplace: `const UPDATE_ENDPOINT = settings.get('UPDATE_ENDPOINT') || API_ENDPOINT`,\n      replaceWith: `const UPDATE_ENDPOINT = settings.get('UPDATE_ENDPOINT') || 'https://updates.goosemod.com/' + (process.stdout.write('GooseUpdate mods:\\\\n1. GooseMod\\\\n2. BetterDiscord\\\\n3. SmartCord\\\\n\\\\nEnter number(s) of mods> ') ? require('child_process').execSync(\"bash -c 'read -p \\\\\"foobar\\\\\" inp; echo $inp'\", {stdio: ['inherit', 'pipe', 'pipe'] }).toString().replace('1', 'goosemod ').replace('2', 'betterdiscord ').replace('3', 'smartcord ').trim().replace(' ', '+') : '')`,\n    });\n\n    await replaceInFile({\n      filePath: join(asarExtractPath, \"app_bootstrap\", \"Constants.js\"),\n      toReplace: `const NEW_UPDATE_ENDPOINT = settings.get('NEW_UPDATE_ENDPOINT') || 'https://discord.com/api/updates/'`,\n      replaceWith: `const NEW_UPDATE_ENDPOINT = settings.get('NEW_UPDATE_ENDPOINT') || (UPDATE_ENDPOINT + '/')`,\n    });\n\n    await replaceInFile({\n      filePath: join(asarExtractPath, \"common\", \"Settings.js\"),\n      toReplace: `return defaultValue`,\n      replaceWith: `return key === 'SKIP_HOST_UPDATE' ? true : defaultValue`,\n    });\n  }\n}\n"],"mappings":";;AAAA;AACA;AACA;AAEO,MAAM,kBAAkB,MAAM;AAAA,EACnC,MAAsB,IAAI,EAAE,mBAA+B;AACzD,UAAM,cAAc;AAAA,MAClB,UAAU,KAAK,iBAAiB,iBAAiB,cAAc;AAAA,MAC/D,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAED,UAAM,cAAc;AAAA,MAClB,UAAU,KAAK,iBAAiB,iBAAiB,cAAc;AAAA,MAC/D,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAED,UAAM,cAAc;AAAA,MAClB,UAAU,KAAK,iBAAiB,UAAU,aAAa;AAAA,MACvD,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AACF;AApBa;","names":[]}