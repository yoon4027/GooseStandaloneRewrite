{"version":3,"sources":["../../src/patches/branding-files.ts"],"sourcesContent":["import { Patch } from \"#lib/structures\";\nimport { renameFile, replaceInFile } from \"#lib/util\";\nimport { toTitleCase } from \"@sapphire/utilities\";\nimport { join } from \"path\";\n\nexport class UserPatch extends Patch {\n  public override async run(\n    { basePath }: Patch.Args,\n    { name, channel, platform }: Patch.ArgsExtra\n  ) {\n    if (platform === \"linux\") await this.runLinux({ basePath, name, channel });\n\n    const execSuffix = channel === \"stable\" ? \"\" : toTitleCase(channel);\n    const execExt = platform === \"windows\" ? \".exe\" : \"\";\n\n    const execPath = join(basePath, `Discord${execSuffix}${execExt}`);\n\n    await renameFile({\n      oldPath: execPath,\n      newPath: join(basePath, `${toTitleCase(name)}${execSuffix}${execExt}`),\n    });\n  }\n\n  private async runLinux({ basePath, channel, name }: RunLinuxOptions) {\n    const desktopPath = join(\n      basePath,\n      `discord${channel === \"stable\" ? \"\" : `-${channel}`}.desktop`\n    );\n\n    await replaceInFile({\n      filePath: desktopPath,\n      toReplace: \"discord\",\n      replaceWith: name.toLowerCase(),\n    });\n\n    await replaceInFile({\n      filePath: desktopPath,\n      toReplace: \"Discord\",\n      replaceWith: toTitleCase(name),\n    });\n\n    // Rename file\n    await renameFile({\n      oldPath: desktopPath,\n      newPath: join(\n        basePath,\n        `${name.toLowerCase()}${\n          channel === \"stable\" ? \"\" : `-${channel}`\n        }.desktop`\n      ),\n    });\n  }\n}\n\ntype RunLinuxOmit = Omit<Patch.ArgsExtra, \"platform\">;\n\ninterface RunLinuxOptions extends Omit<RunLinuxOmit, \"buildInfo\"> {\n  basePath: string;\n}\n"],"mappings":";;AAAA;AACA;AACA;AACA;AAEO,MAAM,kBAAkB,MAAM;AAAA,EACnC,MAAsB,IACpB,EAAE,YACF,EAAE,MAAM,SAAS,YACjB;AACA,QAAI,aAAa;AAAS,YAAM,KAAK,SAAS,EAAE,UAAU,MAAM,QAAQ,CAAC;AAEzE,UAAM,aAAa,YAAY,WAAW,KAAK,YAAY,OAAO;AAClE,UAAM,UAAU,aAAa,YAAY,SAAS;AAElD,UAAM,WAAW,KAAK,UAAU,UAAU,aAAa,SAAS;AAEhE,UAAM,WAAW;AAAA,MACf,SAAS;AAAA,MACT,SAAS,KAAK,UAAU,GAAG,YAAY,IAAI,IAAI,aAAa,SAAS;AAAA,IACvE,CAAC;AAAA,EACH;AAAA,EAEA,MAAc,SAAS,EAAE,UAAU,SAAS,QAAyB;AACnE,UAAM,cAAc,KAClB,UACA,UAAU,YAAY,WAAW,KAAK,IAAI,mBAC5C;AAEA,UAAM,cAAc;AAAA,MAClB,UAAU;AAAA,MACV,WAAW;AAAA,MACX,aAAa,KAAK,YAAY;AAAA,IAChC,CAAC;AAED,UAAM,cAAc;AAAA,MAClB,UAAU;AAAA,MACV,WAAW;AAAA,MACX,aAAa,YAAY,IAAI;AAAA,IAC/B,CAAC;AAGD,UAAM,WAAW;AAAA,MACf,SAAS;AAAA,MACT,SAAS,KACP,UACA,GAAG,KAAK,YAAY,IAClB,YAAY,WAAW,KAAK,IAAI,mBAEpC;AAAA,IACF,CAAC;AAAA,EACH;AACF;AA/Ca;","names":[]}